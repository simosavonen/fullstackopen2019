{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","_ref","person","deleteHandler","react_default","a","createElement","name","number","onClick","Persons","props","persons","map","Persons_Person","key","PersonForm","formAction","nameState","numberState","nameHandler","numberHandler","onSubmit","value","onChange","type","Filter","filter","handler","Notification","message","isError","className","baseUrl","services_persons","axios","get","newObject","post","id","put","concat","delete","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","nameFilter","setNameFilter","_useState9","_useState10","setMessage","_useState11","_useState12","setIsError","useEffect","personService","then","response","data","personsToShow","toLowerCase","includes","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","personObject","personSingle","p","length","setTimeout","catch","error","window","confirm","components_Persons","personDeleted","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.84074351.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, deleteHandler }) => {\r\n    return (\r\n        <tr>\r\n            <td>{person.name}</td>\r\n            <td>{person.number}</td>\r\n            <td>\r\n                <button onClick={() => deleteHandler(person)}>poista</button>\r\n            </td>\r\n        </tr>\r\n    )\r\n}\r\n\r\nconst Persons = (props) => {\r\n\r\n    const rows = () => props.persons.map(person =>\r\n        <Person \r\n        key={person.name}\r\n        person={person}\r\n        deleteHandler={props.deleteHandler}\r\n        />  \r\n    )\r\n\r\n    return (\r\n        <table>\r\n            <tbody>\r\n                {rows()}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    const { formAction, nameState, numberState, \r\n        nameHandler, numberHandler } = props\r\n    return (\r\n        <form onSubmit={formAction}>\r\n            <div>\r\n                nimi: \r\n                <input \r\n                value={nameState}\r\n                onChange={nameHandler}\r\n                />\r\n            </div>\r\n            <div>\r\n                numero:\r\n                <input \r\n                value={numberState}\r\n                onChange={numberHandler}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">lisää</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <div>\r\n            rajaa näytettäviä \r\n            <input \r\n            value={props.filter}\r\n            onChange={props.handler}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n    if(message === null) {\r\n        return null\r\n    }\r\n\r\n    return (        \r\n        <div className={isError ? 'error notification' : 'notification' } >\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nconst remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n  \r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ nameFilter, setNameFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ isError, setIsError ] = useState(false)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const personsToShow = !nameFilter\n  ? persons\n  : persons.filter(person => person.name.toLowerCase().includes(nameFilter))\n\n  const addNumber = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    const personSingle = persons.filter(p => p.name === newName) \n    if(personSingle.length === 0) {\n      personService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n          setNewName('')\n          setNewNumber('')\n          setMessage(`Lisättiin ${response.data.name}.`)\n          setIsError(false)\n          setTimeout(() => { setMessage(null) }, 5000)\n        })\n        .catch(error => {\n          setMessage(`Numeron lisäys epäonnistui: ${error.response.data.error}`)\n          setIsError(true)\n          setTimeout(() => { setMessage(null) }, 5000)\n        })\n    }\n    else {\n      const message = `${newName} on jo luettelossa, korvataanko vanha numero uudella?`\n      if(window.confirm(message)) {\n        const id = personSingle[0].id\n        personService\n          .update(id, personObject)\n          .then(response => {\n            setPersons(persons.map(p => p.id !== id ? p : response.data))\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setMessage(`${newName} oli jo poistettu palvelimelta.`)\n            setIsError(true)\n            setTimeout(() => { setMessage(null) }, 5000)\n\n            // ehkä pitäisi hakea palvelimelta uusi päivitetty tilanne\n            setPersons(persons.filter(p => p.id !== id))\n          })\n      }\n    }\n  }\n\n  \n  const handleDeletion = person => {    \n    if(window.confirm(`Poistetaanko ${person.name}?`)) {\n      const personDeleted = persons.filter(p => p.id !== person.id)\n      personService\n        .remove(person.id)\n        .then(() => {\n          setPersons(personDeleted)\n          setMessage(`Poistettiin ${person.name}.`)\n          setIsError(false)\n          setTimeout(() => { setMessage(null) }, 5000)\n        })\n        .catch(error => {\n          setMessage(`${person.name} oli jo poistettu palvelimelta.`)\n          setIsError(true)\n          setTimeout(() => { setMessage(null) }, 5000)\n\n          // ehkä pitäisi hakea palvelimelta uusi päivitetty tilanne\n          setPersons(personDeleted)\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNameFilterChange = (event) => {\n    setNameFilter(event.target.value.toLowerCase())\n  }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      \n      <Notification message={message} isError={isError} />\n\n      <Filter filter={nameFilter} handler={handleNameFilterChange} />\n      <h3>lisää uusi</h3>\n      <PersonForm \n        formAction={addNumber}\n        nameState={newName}\n        numberState={newNumber}\n        nameHandler={handleNameChange}\n        numberHandler={handleNumberChange}\n      />     \n      <h3>Numerot</h3>\n      <Persons persons={personsToShow} deleteHandler={handleDeletion} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}